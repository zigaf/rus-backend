# Rus Medical Backend

Backend API –¥–ª—è —Å–∞–π—Ç—É –ª—ñ–∫–∞—Ä—è –†—É—Å–ª–∞–Ω–∏ –ú–æ—Å–∫–∞–ª–µ–Ω–∫–æ - —Ç–æ—Ä–∞–∫–∞–ª—å–Ω–æ–≥–æ —Ö—ñ—Ä—É—Ä–≥–∞-–æ–Ω–∫–æ–ª–æ–≥–∞.

## üöÄ –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- **Node.js** + **TypeScript**
- **Express.js** - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Prisma** - ORM –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö
- **PostgreSQL** - –±–∞–∑–∞ –¥–∞–Ω–∏—Ö
- **JWT** - –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è
- **Multer** - –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤
- **Sharp** - –æ–±—Ä–æ–±–∫–∞ –∑–æ–±—Ä–∞–∂–µ–Ω—å
- **Railway** - —Ö–æ—Å—Ç–∏–Ω–≥

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
backend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ middleware/          # Middleware —Ñ—É–Ω–∫—Ü—ñ—ó
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.ts         # –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ upload.ts       # –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ routes/             # API –º–∞—Ä—à—Ä—É—Ç–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.ts         # –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ articles.ts     # –°—Ç–∞—Ç—Ç—ñ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ gallery.ts      # –ì–∞–ª–µ—Ä–µ—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ contact.ts      # –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ upload.ts       # –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤
‚îÇ   ‚îî‚îÄ‚îÄ server.ts           # –ì–æ–ª–æ–≤–Ω–∏–π —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ prisma/
‚îÇ   ‚îî‚îÄ‚îÄ schema.prisma       # –°—Ö–µ–º–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îî‚îÄ‚îÄ seed.ts            # –ù–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –ë–î —Ç–µ—Å—Ç–æ–≤–∏–º–∏ –¥–∞–Ω–∏–º–∏
‚îú‚îÄ‚îÄ uploads/               # –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ —Ñ–∞–π–ª–∏
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ tsconfig.json
‚îî‚îÄ‚îÄ railway.json          # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Railway
```

## üõ† –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

### –õ–æ–∫–∞–ª—å–Ω–∞ —Ä–æ–∑—Ä–æ–±–∫–∞

1. **–í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:**
```bash
cd backend
npm install
```

2. **–ù–∞–ª–∞—à—Ç—É–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞:**
```bash
cp env.example .env
```

3. **–ù–∞–ª–∞—à—Ç—É–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–∏—Ö:**
```bash
# –ì–µ–Ω–µ—Ä—É–π—Ç–µ Prisma –∫–ª—ñ—î–Ω—Ç
npm run generate

# –ó–∞–ø—É—Å—Ç—ñ—Ç—å –º—ñ–≥—Ä–∞—Ü—ñ—ó
npm run migrate

# –ù–∞–ø–æ–≤–Ω—ñ—Ç—å –ë–î —Ç–µ—Å—Ç–æ–≤–∏–º–∏ –¥–∞–Ω–∏–º–∏
npx ts-node scripts/seed.ts
```

4. **–ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä:**
```bash
# –†–æ–∑—Ä–æ–±–∫–∞
npm run dev

# –ü—Ä–æ–¥–∞–∫—à–Ω
npm run build
npm start
```

### Railway Deployment

1. **–ü—ñ–¥–∫–ª—é—á—ñ—Ç—å PostgreSQL:**
   - –î–æ–¥–∞–π—Ç–µ PostgreSQL –ø–ª–∞–≥—ñ–Ω –≤ Railway
   - –°–∫–æ–ø—ñ—é–π—Ç–µ `DATABASE_URL` –≤ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

2. **–ù–∞–ª–∞—à—Ç—É–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞:**
```env
DATABASE_URL=postgresql://...
JWT_SECRET=your-secret-key
FRONTEND_URL=https://your-frontend.railway.app
RAILWAY_STATIC_URL=https://your-backend.railway.app
```

3. **–î–µ–ø–ª–æ–π:**
   - Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–±—É–¥—É—î —Ç–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç
   - –ú—ñ–≥—Ä–∞—Ü—ñ—ó –∑–∞–ø—É—Å—Ç—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

## üìö API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è
- `POST /api/auth/login` - –í—Ö—ñ–¥
- `POST /api/auth/register` - –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è (—Ç—ñ–ª—å–∫–∏ –∞–¥–º—ñ–Ω)
- `GET /api/auth/me` - –ü–æ—Ç–æ—á–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á
- `PUT /api/auth/change-password` - –ó–º—ñ–Ω–∞ –ø–∞—Ä–æ–ª—è

### –°—Ç–∞—Ç—Ç—ñ
- `GET /api/articles` - –°–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π
- `GET /api/articles/:id` - –û–¥–Ω–∞ —Å—Ç–∞—Ç—Ç—è
- `POST /api/articles` - –°—Ç–≤–æ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—Ç—é (–∞–¥–º—ñ–Ω)
- `PUT /api/articles/:id` - –û–Ω–æ–≤–∏—Ç–∏ —Å—Ç–∞—Ç—Ç—é (–∞–¥–º—ñ–Ω)
- `DELETE /api/articles/:id` - –í–∏–¥–∞–ª–∏—Ç–∏ —Å—Ç–∞—Ç—Ç—é (–∞–¥–º—ñ–Ω)
- `PATCH /api/articles/:id/publish` - –û–ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏/–ø—Ä–∏—Ö–æ–≤–∞—Ç–∏ (–∞–¥–º—ñ–Ω)

### –ì–∞–ª–µ—Ä–µ—è
- `GET /api/gallery` - –°–ø–∏—Å–æ–∫ –∑–æ–±—Ä–∞–∂–µ–Ω—å
- `GET /api/gallery/:id` - –û–¥–Ω–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
- `POST /api/gallery` - –î–æ–¥–∞—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è (–∞–¥–º—ñ–Ω)
- `PUT /api/gallery/:id` - –û–Ω–æ–≤–∏—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è (–∞–¥–º—ñ–Ω)
- `DELETE /api/gallery/:id` - –í–∏–¥–∞–ª–∏—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è (–∞–¥–º—ñ–Ω)
- `PATCH /api/gallery/reorder` - –ó–º—ñ–Ω–∏—Ç–∏ –ø–æ—Ä—è–¥–æ–∫ (–∞–¥–º—ñ–Ω)

### –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤
- `POST /api/upload/single` - –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –æ–¥–∏–Ω —Ñ–∞–π–ª (–∞–¥–º—ñ–Ω)
- `POST /api/upload/multiple` - –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∫—ñ–ª—å–∫–∞ —Ñ–∞–π–ª—ñ–≤ (–∞–¥–º—ñ–Ω)
- `DELETE /api/upload/:filename` - –í–∏–¥–∞–ª–∏—Ç–∏ —Ñ–∞–π–ª (–∞–¥–º—ñ–Ω)
- `GET /api/upload` - –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª—ñ–≤ (–∞–¥–º—ñ–Ω)

### –ö–æ–Ω—Ç–∞–∫—Ç–∏
- `POST /api/contact` - –í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- `GET /api/contact` - –°–ø–∏—Å–æ–∫ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å (–∞–¥–º—ñ–Ω)
- `GET /api/contact/:id` - –û–¥–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (–∞–¥–º—ñ–Ω)
- `PATCH /api/contact/:id/read` - –ü–æ–∑–Ω–∞—á–∏—Ç–∏ —è–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–µ (–∞–¥–º—ñ–Ω)
- `DELETE /api/contact/:id` - –í–∏–¥–∞–ª–∏—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (–∞–¥–º—ñ–Ω)

## üîê –ë–µ–∑–ø–µ–∫–∞

- **JWT —Ç–æ–∫–µ–Ω–∏** –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
- **bcrypt** –¥–ª—è —Ö–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤
- **Rate limiting** –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É –≤—ñ–¥ DDoS
- **Helmet** –¥–ª—è –±–µ–∑–ø–µ–∫–∏ –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤
- **CORS** –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É
- **–í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ñ–∞–π–ª—ñ–≤** –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ

## üìÅ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤

### –ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ —Ñ–æ—Ä–º–∞—Ç–∏:
- **–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è:** JPEG, PNG, WebP
- **–í—ñ–¥–µ–æ:** MP4, WebM, QuickTime

### –û–±—Ä–æ–±–∫–∞ –∑–æ–±—Ä–∞–∂–µ–Ω—å:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–º–µ–Ω—à–µ–Ω–Ω—è –¥–æ 1200x800px
- –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è —è–∫–æ—Å—Ç—ñ (85%)
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è –≤ JPEG

### –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è:
- –õ–æ–∫–∞–ª—å–Ω–æ: `./uploads/`
- Railway: –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è

## üóÑ –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö

### –ú–æ–¥–µ–ª—ñ:
- **User** - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ (–∞–¥–º—ñ–Ω–∏)
- **Article** - —Å—Ç–∞—Ç—Ç—ñ
- **GalleryImage** - –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≥–∞–ª–µ—Ä–µ—ó
- **ContactMessage** - –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è

### –ú—ñ–≥—Ä–∞—Ü—ñ—ó:
```bash
npm run migrate    # –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—ó
npm run generate   # –ì–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –∫–ª—ñ—î–Ω—Ç
```

## üöÄ Railway Deployment

1. **–ü—ñ–¥–∫–ª—é—á—ñ—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π** –¥–æ Railway
2. **–î–æ–¥–∞–π—Ç–µ PostgreSQL** –ø–ª–∞–≥—ñ–Ω
3. **–ù–∞–ª–∞—à—Ç—É–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞**
4. **–î–µ–ø–ª–æ–π** - Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:
   - –í—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
   - –ó–±—É–¥—É—î –ø—Ä–æ–µ–∫—Ç
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å –º—ñ–≥—Ä–∞—Ü—ñ—ó
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä

## üìä –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

- **Health check:** `/health`
- **–õ–æ–≥–∏:** Railway Dashboard
- **–ú–µ—Ç—Ä–∏–∫–∏:** Railway Analytics

## üîß –†–æ–∑—Ä–æ–±–∫–∞

### –ö–æ–º–∞–Ω–¥–∏:
```bash
npm run dev        # –†–æ–∑—Ä–æ–±–∫–∞ –∑ hot reload
npm run build      # –ó–±—ñ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω—É
npm start          # –ó–∞–ø—É—Å–∫ –ø—Ä–æ–¥–∞–∫—à–Ω –≤–µ—Ä—Å—ñ—ó
npm run migrate    # –ú—ñ–≥—Ä–∞—Ü—ñ—ó –ë–î
npm run generate   # –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è Prisma –∫–ª—ñ—î–Ω—Ç–∞
npm run studio     # Prisma Studio
```

### –¢–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ:
```bash
npx ts-node scripts/seed.ts
```

**–¢–µ—Å—Ç–æ–≤–∏–π –∞–¥–º—ñ–Ω:**
- Email: `admin@rus-medical.com`
- Password: `admin123`

## üìù –õ—ñ—Ü–µ–Ω–∑—ñ—è

–ü—Ä–∏–≤–∞—Ç–Ω–∏–π –ø—Ä–æ–µ–∫—Ç –¥–ª—è –º–µ–¥–∏—á–Ω–æ–≥–æ —Å–∞–π—Ç—É.
